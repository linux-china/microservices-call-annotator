/*
 * Copyright (c) 2019 Yuriy Artamonov <jreznot>
 *
 * All rights reserved. No warranty, explicit or implicit, provided.
 */

plugins {
  id 'java'
  id 'org.jetbrains.intellij' version '1.3.0'
  id 'org.jetbrains.kotlin.jvm' version '1.5.10'
}

group 'org.strangeway.microservices'
version '1.0.3'

java {
  sourceCompatibility = JavaVersion.toVersion("11")
  targetCompatibility = JavaVersion.toVersion("11")
}

repositories {
  mavenCentral()
}

dependencies {
  implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8"
}

intellij {
  // type = 'IU'
  version = '2021.2.2'
  plugins = ['com.intellij.java']
  downloadSources = true
}

compileKotlin {
  kotlinOptions.jvmTarget = "11"
}

compileTestKotlin {
  kotlinOptions.jvmTarget = "11"
}

patchPluginXml {
  changeNotes = """
      Fixed issue with double icon for constructors. 
      Implemented mergeable line markers.
      Support gRPC, Google Firestore, Redis async and reactive APIs.
    """
  sinceBuild = '212'
  untilBuild = '222'
}

buildPlugin {
  exclude('**/kotlin-*.jar')
  exclude('**/annotations-*.jar')
}